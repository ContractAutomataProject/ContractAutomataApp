package CA;
import java.io.BufferedReader;
import java.io.InputStreamReader;

import FSA.FSA;
import FSA.Simulator;
import FSA.Transition;



/**
 * @author Davide Basile
 *
 */
@SuppressWarnings("serial")
public class CA  extends FSA implements java.io.Serializable
{
	private int rank;
	private int[] states;
	private int[][] finalstates; 
	private Transition[] tra;
	private static String message = "*** CA simulator ***\n";
	
	/**
	 * Invoke the super constructor and take in input the added new parameters of the automaton
	 */
	public CA()
	{
		super(message);
		 this.states = new int[super.getStates()][];
	        for (int i=0;i<this.states.length;i++)
	        {
	        	states[i] = new int[0];
	        	states[i][0]=i;
	        }
	        finalstates = new int[super.getFinalStates().length][];
			for(int i=0;i<finalstates.length;i++){
	        	finalstates[i]= new int[1];
	        	finalstates[i][0]= super.getFinalStates()[i];
	        }
	}

	
	
	
	/**
	 * Print in output a description of the automaton
	 */
	public void print()
	{
		super.print();
	}
	
	
	
	/**
	 * Create an instance of the simulator for an FMA
	 */
	protected Simulator createSim()
	{
		//return new FMASimulator(this);
		return null;
	}
	
	/**
	 * 
	 * @param i		the index of the transition to be showed as a message to the user
	 * @return		a new Transition for this automaton
	 */
	protected Transition createTransition(int i)
	{
		return new CATransition(i);
	}
	
	
	/**
	 * 
	 * @return	the array of final states
	 */
	public int[][] getFinalStatesCA()
	{
		return finalstates;
	}
	
	/**
	 * 
	 * @return	the number of states
	 */
	public int[][] getStatesCA()
	{
		return states;
	}
	
	
	public static CA product(CA[] aut)
	{
		int rank =0;
		int count_states=1;
		for (int i=0;i<aut.length;i++)
		{
			count_states=count_states*(aut[i].getStatesCA().length); //number of states
			rank = rank+(aut[i].getStatesCA()[0].length); // rank
		}
		int[][] statesprod = new int[count_states][rank];
		return null;
	}
	
	public CA proj(int i)
	{
		if ((i<0)||(i>states[0].length)) //check if the parameter i is in the rank of the CA
			return null;
		
		
		return null;
	}
	
	public static CA aproduct(CA[] automata)
	{
		return null;
	}
	
	public boolean branchingCondition()
	{
		return false;
	}
	
	public boolean mixedChoice()
	{
		return false;
	}
}
